
/* To make this, enable "One Column" option in SumoDB, copy & paste the tables 
 * as plain text and then turn them into array like this.
 */
var theSekitori = [
  "Y1e Terunofuji 2-3",
  "O1e Kotozakura 5-10",
  "O1w Hoshoryu 12-3 Y",
  "O2w Onosato 10-5",
  "S1e Wakamotoharu 6-9",
  "S1w Daieisho 11-4",
  "K1e Abi 7-8",
  "K1w Wakatakakage 7-8",
  "M1e Takanosho 6-9",
  "M1w Kirishima 11-4 K",
  "M2e Tobizaru 7-8",
  "M2w Atamifuji 5-10",
  "M3e Gonoyama 8-7",
  "M3w Oho 12-3 DG",
  "M4e Shodai 6-9",
  "M4w Ura 7-8",
  "M5e Hiradoumi 7-8",
  "M5w Chiyoshoma 9-6",
  "M6e Takayasu 8-7",
  "M6w Ichiyamamoto 8-7",
  "M7e Endo 6-9",
  "M7w Mitakeumi 2-13",
  "M8e Roga 0-3-12",
  "M8w Takarafuji 5-10",
  "M9e Churanoumi 4-11",
  "M9w Oshoma 8-7",
  "M10e Tamawashi 9-6",
  "M10w Meisei 6-9",
  "M11e Midorifuji 7-8",
  "M11w Takerufuji 10-5",
  "M12e Nishikigi 8-7",
  "M12w Onokatsu 7-8",
  "M13e Shonannoumi 8-7",
  "M13w Kotoshoho 5-10",
  "M14e Hokutofuji 0-0-15",
  "M14w Kinbozan 12-3 DK",
  "M15e Hakuoho 10-5",
  "M15w Kitanowaka 4-5-6",
  "M16e Tamashoho 6-9",
  "M16w Kagayaki 6-9",
  "M17e Nishikifuji 9-6",
  "M17w Tokihayate 7-8",
  "J1e Sadanoumi 9-6",
  "J1w Kayo 7-8",
  "J2e Shiden 5-10",
  "J2w Asakoryu 9-6",
  "J3e Ryuden 11-4",
  "J3w Tsurugisho 2-13",
  "J4e Shirokuma 9-6",
  "J4w Shishi 13-2 Y",
  "J5e Shimanoumi 3-12",
  "J5w Aonishiki 12-3",
  "J6e Hidenoumi 7-8",
  "J6w Tomokaze 7-8",
  "J7e Tochitaikai 8-7",
  "J7w Bushozan 0-0-15",
  "J8e Fujiseiun 8-7",
  "J8w Mitoryu 8-7",
  "J9e Daiseizan 5-10",
  "J9w Oshoumi 9-6",
  "J10e Shimazuumi 3-12",
  "J10w Hakuyozan 8-7",
  "J11e Daiamami 4-11",
  "J11w Tohakuryu 8-7",
  "J12e Hatsuyama 6-9",
  "J12w Kiryuko 7-8",
  "J13e Wakaikari 9-3-3",
  "J13w Kotoeiho 10-5",
  "J14e Nabatame 11-4",
  "J14w Daishoho 1-14",
  "Ms1e Wakanosho 5-2",
  "Ms1w Kazekeno 4-3",
  "Ms2e Kotokuzan 3-4",
  "Ms2w Akua 3-4",
  "Ms3e Onosho 0-0",
  "Ms3w Kusano 4-3",
  "Ms4e Miyagi 4-3",
  "Ms4w Hitoshi 6-1",
  "Ms5e Osanai 1-6",
  "Ms5w Otsuji 5-2",
  "Ms6e Nishinoryu 4-3",
  "Ms6w Kaiseijo 1-6",
  "Ms7e Tochimaru 5-2",
  "Ms7w Tenshoho 4-3",
  "Ms8e Matsui 2-5",
  "Ms8w Ishizaki 6-1",
  "Ms9e Asahakuryu 3-4",
  "Ms9w Takakento 4-3",
  "Ms10e Chiyomaru 3-4",
  "Ms10w Kurohimeyama 0-1-6",
  "Ms11e Kamito 2-1-4",
  "Ms11w Toseiryu 2-5",
  "Ms12e Yuma 2-4-1",
  "Ms12w Nihonyanagi 2-3-2",
  "Ms13e Tosamidori 3-4",
  "Ms13w Hokutomaru 3-4",
  "Ms14e Kotokenryu 5-2",
  "Ms14w Tochimusashi 4-3",
  "Ms15e Fujitoshi 3-4",
  "Ms15w Kaisho 5-2",
  "Ms16e Kyokukaiyu 5-2",
  "Ms17e Mita 6-1",
  "Ms17w Okaryu 4-3",
  "Ms18e Asakoki 4-2-1",
  "Ms19e Satorufuji 4-3",
  "Ms19w Inami 4-3",
  "Ms22e Dewanoryu 5-2",
  "Ms23w Kazenoumi 4-3",
  "Ms24w Kitaharima 5-2",
  "Ms25e Haruyama 4-3",
  "Ms26e Fujinoyama 5-2",
  "Ms27e Fukai 4-3",
  "Ms27w Asonoyama 4-3",
  "Ms29e Hamayutaka 5-2",
  "Ms29w Kitadaichi 4-3",
  "Ms30e Hananoumi 4-3",
  "Ms31w Gojinyu 6-1",
  "Ms32e Anosho 5-2",
  "Ms33w Wakatakamoto 4-3",
  "Ms34e Nobehara 5-2",
  "Ms35e Chiyotora 4-3",
  "Ms35w Narutaki 5-2",
  "Ms37e Higonoumi 4-3",
  "Ms38w Tsushimanada 6-1",
  "Ms39e Shohoryu 4-3",
  "Ms39w Awanokuni 4-3",
  "Ms40w Asashiyu 6-1",
  "Ms44e Mudoho 7-0 Y",
  "Ms46e Shuji 4-3",
  "Ms47e Tochikodai 4-3",
  "Ms47w Kaishin 4-3",
  "Ms48e Oshoryu 5-2",
  "Ms50e Hinataryu 4-3",
  "Ms50w Oyamada 5-2",
  "Ms51e Nionoumi 4-3",
  "Ms53e Chiyoraizan 4-3",
  "Ms54w Sazanami 5-2",
  "Ms56e Anhibiki 4-3",
  "Ms57e Aratakayama 6-1",
  "Ms57w Hayatefuji 4-3",
  "Ms58w Kotosato 5-2",
  "Ms59e Kotodaishin 4-3",
  "Ms60e Kawazoe 5-2",
  "Sd32e Daimasakari 7-0 Y"
];

/* Add here the shikona of retired sekitori, who will not appear in the
 * following banzuke. If nobody retired then leave this array empty
 */
var retiredRikishi = [
  "Terunofuji",
  "Onosho"
];

/*
Use the code below to get the IDs from SumoDB with "no rank colouring" checked
Later on I will extend this to grab the rikishi strings as well

document.head.appendChild(Object.assign(
    document.createElement('script'),
    { src: 'https://code.jquery.com/jquery-3.6.4.min.js' }
));

var shikona = $(".banzuke").find(".shikona").has("a")
var ids = []
shikona.each(function(i) {
    if ($(this).prev().text().startsWith("Sd"))
        return false;
    else if ($(this).prev().text().startsWith("Ms") && parseInt($(this).prev().text().slice(2)) > 15 && parseInt($(this).next().text().charAt(0)) < 4)
        return;
    ids.push(parseInt($(this).children().first().attr("href").slice(15)))
}) 
*/
var sekitoriID = [
  11927,
  12270,
  12451,
  12836,
  11980,
  11985,
  12094,
  12370,
  11855,
  12231,
  12203,
  12664,
  12688,
  12453,
  12130,
  12226,
  12314,
  11785,
  6480,
  12362,
  12055,
  12210,
  12516,
  11728,
  12320,
  12717,
  5944,
  11946,
  12352,
  12780,
  6596,
  12840,
  12162,
  12449,
  12239,
  12721,
  12796,
  12548,
  11976,
  11845,
  12351,
  12542,
  2879,
  12774,
  12141,
  12710,
  6594,
  12113,
  12773,
  12599,
  12024,
  12839,
  12026,
  12427,
  12448,
  12117,
  12702,
  12406,
  12725,
  12634,
  12013,
  11943,
  12273,
  12575,
  12732,
  12711,
  12800,
  12729,
  12597,
  12040,
  12730,
  12767,
  11809,
  11918,
  12043,
  12884,
  12713,
  12704,
  12699,
  12561,
  12523,
  12137,
  11965,
  12709,
  12876,
  12894,
  12784,
  12114,
  7240,
  12515,
  12416,
  12731,
  12165,
  12594,
  12263,
  12519,
  12724,
  12674,
  12703,
  12075,
  12841,
  12898,
  12885,
  11743,
  12793,
  12851,
  12592,
  12782,
  1241,
  12832,
  12534,
  12610,
  12458,
  11936,
  12155,
  12727,
  12733,
  12834,
  11814,
  12708,
  12576,
  12357,
  12227,
  12342,
  12189,
  12530,
  12369,
  12593,
  12139,
  12373,
  12400,
  12587,
  12455,
  12775,
  1266,
  6618,
  12225,
  12844,
  12559,
  12596,
  12785,
  12527,
  12779,
  12849
];

class Rikishi {
  constructor(rank, name, winCount, id) {
    this.rank = rank;
    this.name = name;
    this.winCount = winCount;
    this.id = id;
  }

  getLink() {
    return `<a href="https://sumodb.sumogames.de/Rikishi.aspx?r=${this.id}" target="_blank">${this.name}</a>`;
  }

  getRecordLink(basho) {
    return `<a href="https://sumodb.sumogames.de/Rikishi_basho.aspx?r=${this.id}&b=${basho}" target="_blank">${this.winCount}</a>`;
  }

  createCard(basho) {
    const card = document.createElement("div");
    const wins = this.winCount.split("-")[0];
    card.id = this.rank;
    card.className = "redips-drag se";
    card.setAttribute("data-w", this.rank.startsWith("Ms") || this.rank.startsWith("Sd") || this.rank.startsWith("Jd") || this.rank.startsWith("Jk") ? wins * 2 : wins);
    card.setAttribute("data-re", this.winCount);
    card.innerHTML = this.getLink(basho);
    return card;
  }
}

export class RetiredRikishi extends Rikishi {
  constructor(rank, name, winCount, id) {
    super(rank, name, winCount, id);
  }

  createCard(basho) {
    const card = super.createCard(basho);
    card.style.backgroundColor = "rgb(203, 203, 203)";
    card.className = "redips-drag intai";
    card.setAttribute("title", "Retired");
    return card;
  }
}

export const allRikishi = theSekitori.map((rikishiString, index) => {
  var [rank, name, winCount] = rikishiString.split(' ');
  const id = sekitoriID[index];
  if (rikishiString.split(' ')[3]) 
    winCount += ' ' + rikishiString.split(' ')[3];
  if (retiredRikishi.includes(name)) {
    return new RetiredRikishi(rank, name, winCount, id);
  }
  return new Rikishi(rank, name, winCount, id);
});
