/* To make this, enable "One Column" option in SumoDB, copy & paste the tables 
 * as plain text and then turn them into array like this.
 */
var theSekitori = [
  "Y1e Terunofuji 0-2-13",
  "O1e Hoshoryu 10-5",
  "O1w Kotozakura 11-4 J",
  "O2e Takakeisho 0-2-13",
  "O2w Kirishima 1-6-8",
  "S1e Wakamotoharu 4-8-3",
  "S1w Abi 10-5",
  "K1e Asanoyama 0-0-15",
  "K1w Onosato 12-3 Y..",
  "M1e Atamifuji 7-8",
  "M1w Daieisho 11-4 J",
  "M2e Hiradoumi 9-6",
  "M2w Gonoyama 6-9",
  "M3e Takayasu 7-3-5",
  "M3w Tobizaru 6-9",
  "M4e Oho 6-9",
  "M4w Ura 7-8",
  "M5e Onosho 7-8",
  "M5w Meisei 10-5",
  "M6e Takerufuji 0-0-15",
  "M6w Midorifuji 5-10",
  "M7e Nishikigi 5-10",
  "M7w Mitakeumi 8-7",
  "M8e Takanosho 8-7",
  "M8w Kotoshoho 8-7",
  "M9e Tamawashi 7-8",
  "M9w Shodai 7-8",
  "M10e Shonannoumi 9-6",
  "M10w Kinbozan 8-7",
  "M11e Sadanoumi 9-6",
  "M11w Hokutofuji 7-8",
  "M12e Ichiyamamoto 8-7",
  "M12w Nishikifuji 5-10",
  "M13e Mitoryu 2-9-4",
  "M13w Churanoumi 8-7",
  "M14e Ryuden 10-5",
  "M14w Oshoma 10-5 K",
  "M15e Tokihayate 6-9",
  "M15w Roga 7-8",
  "M16e Tomokaze 2-13",
  "M16w Takarafuji 9-6",
  "M17e Tsurugisho 3-12",
  "J1e Daiamami 6-9",
  "J1w Myogiryu 3-12",
  "J2e Bushozan 9-6",
  "J2w Daishoho 5-10",
  "J3e Endo 12-3",
  "J3w Chiyoshoma 12-3",
  "J4e Tohakuryu 6-9",
  "J4w Asakoryu 7-8",
  "J5e Kagayaki 11-4",
  "J5w Kitanowaka 8-5-2",
  "J6e Shirokuma 6-9",
  "J6w Wakatakakage 14-1 Y",
  "J7e Shishi 5-10",
  "J7w Shimazuumi 5-8-2",
  "J8e Hidenoumi 6-9",
  "J8w Hakuoho 5-6-4",
  "J9e Chiyosakae 6-9",
  "J9w Tamashoho 8-7",
  "J10e Shiden 8-7",
  "J10w Hakuyozan 6-9",
  "J11e Shimanoumi 9-6",
  "J11w Aoiyama 7-8",
  "J12e Onokatsu 13-2",
  "J12w Tsushimanada 7-8",
  "J13e Oshoumi 5-10",
  "J13w Chiyomaru 4-11",
  "J14e Tochitaikai 8-7",
  "J14w Kazekeno 7-8",
  "Ms1e Akua 3-4",
  "Ms1w Kayo 5-2",
  "Ms2e Kototebakari 2-5",
  "Ms2w Nabatame 5-2",
  "Ms3e Kiryuko 5-2",
  "Ms3w Daiseizan 4-3",
  "Ms4e Kitaharima 4-3",
  "Ms4w Kotokuzan 4-3",
  "Ms5e Daishomaru 3-4",
  "Ms5w Tokunomusashi 2-5",
  "Ms6e Tenshoho 3-3-1",
  "Ms6w Wakaikari 4-3",
  "Ms7e Otsuji 5-2",
  "Ms7w Yoshii 5-2",
  "Ms8e Chiyonoumi 0-5-2",
  "Ms8w Kitadaichi 3-4",
  "Ms9e Miyagi 2-5",
  "Ms9w Nagamura 1-6",
  "Ms10e Haruyama 2-5",
  "Ms10w Asahakuryu 4-3",
  "Ms11e Fujiseiun 7-0 Y",
  "Ms11w Kotoeko 0-0-3",
  "Ms12e Yago 3-4",
  "Ms12w Yuma 3-4",
  "Ms13e Hitoshi 3-4",
  "Ms13w Hokutomaru 2-5",
  "Ms14e Satorufuji 6-1",
  "Ms14w Kaisho 4-3",
  "Ms15e Mineyaiba 4-3",
  "Ms15w Obara 4-3",
  "Ms16e Kotokenryu 4-3",
  "Ms18w Dewanoryu 5-2",
  "Ms20e Wakanosho 6-1",
  "Ms20w Asanowaka 4-3",
  "Ms23e Fukai 5-2",
  "Ms23w Yoshiyasu 4-3",
  "Ms24e Fujitoshi 5-2",
  "Ms25e Kyokutaisei 4-3",
  "Ms26e Kotoyusho 5-2",
  "Ms27e Ryusei 4-3",
  "Ms27w Tosamidori 4-3",
  "Ms29e Tendozan 4-3",
  "Ms29w Tochiseiryu 4-3",
  "Ms30e Toshunryu 4-3",
  "Ms32e Kazenoumi 5-2",
  "Ms32w Nihonyanagi 6-1",
  "Ms33e Shiroma 5-2",
  "Ms34w Chiyonoo 4-3",
  "Ms35e Kaigo 4-3",
  "Ms36e Kamito 6-1",
  "Ms38e Hatsuyama 5-2",
  "Ms40e Aonishiki 6-1",
  "Ms40w Nishinoryu 4-3",
  "Ms41e Matsui 4-2-1",
  "Ms42e Kazuto 5-2",
  "Ms42w Asashiyu 4-3",
  "Ms44e Shohoryu 5-2",
  "Ms44w Osanai 5-2",
  "Ms46w Akiyoshi 4-3",
  "Ms48e Onojo 5-2",
  "Ms48w Kainoshima 5-2",
  "Ms49w Kaiseijo 4-3",
  "Ms51e Shunrai 4-3",
  "Ms53e Hakuonada 4-3",
  "Ms53w Higonoumi 5-2",
  "Ms54e Yutakasho 4-3",
  "Ms56w Seigo 4-3",
  "Ms57w Tokinohira 4-3",
  "Ms58w Dewanojo 4-3",
  "Ms59e Oyamada 6-1",
  "Ms60e Araoyama 4-3",
  "Ms60TD Kusano 6-1"
];

/* Add here the shikona of retired sekitori, who will not appear in the
 * following banzuke. If nobody retired then leave this array empty
 */
var retiredRikishi = ["Kotoeko"];

/* Enable "No Rank Colouring" and "One Column" options and then open the
 * browser's inspector (F12). Find the table and copy & paste the <tbody> node.
 * The rikishi ID is located right after "Rikishi.aspx?r=". Turn the IDs into an
 * array (add the empty spots as 0). This array should have the same length as
 * theSekitori array.
 */
var sekitoriID = [
  11927,
  12451,
  12270,
  12191,
  12231,
  11980,
  12094,
  12291,
  12836,
  12664,
  11985,
  12314,
  12688,
  6480,
  12203,
  12453,
  12226,
  12043,
  11946,
  12780,
  12352,
  6596,
  12210,
  11855,
  12449,
  5944,
  12130,
  12162,
  12721,
  2879,
  12239,
  12362,
  12351,
  12406,
  12320,
  6594,
  12717,
  12542,
  12516,
  12427,
  11728,
  12113,
  12273,
  11784,
  12117,
  12040,
  12055,
  11785,
  12575,
  12710,
  11845,
  12548,
  12773,
  12370,
  12599,
  12013,
  12026,
  12796,
  11736,
  11976,
  12141,
  11943,
  12024,
  11786,
  12840,
  12342,
  12634,
  7240,
  12448,
  12767,
  11918,
  12774,
  12729,
  12597,
  12711,
  12725,
  1241,
  11809,
  12144,
  12333,
  12709,
  12800,
  12561,
  12536,
  12255,
  12155,
  12713,
  12795,
  12832,
  12784,
  12702,
  7153,
  12425,
  12165,
  12704,
  12519,
  12793,
  12075,
  12557,
  12220,
  12724,
  12592,
  12730,
  12484,
  12610,
  12379,
  12703,
  8899,
  12319,
  2892,
  12263,
  12601,
  12132,
  12771,
  12782,
  12594,
  12833,
  11840,
  12488,
  12416,
  12732,
  12839,
  12523,
  12876,
  12776,
  12369,
  12189,
  12699,
  12655,
  11942,
  12372,
  12137,
  12712,
  12564,
  12227,
  12087,
  12393,
  12506,
  12007,
  12775,
  12584,
  12884
];

class Rikishi {
  constructor(rank, name, winCount, id) {
    this.rank = rank;
    this.name = name;
    this.winCount = winCount;
    this.id = id;
  }

  getLink() {
    return `<a href="https://sumodb.sumogames.de/Rikishi.aspx?r=${this.id}" target="_blank">${this.name}</a>`;
  }

  getRecordLink(basho) {
    return `<a href="https://sumodb.sumogames.de/Rikishi_basho.aspx?r=${this.id}&b=${basho}" target="_blank">${this.winCount}</a>`;
  }

  createCard(basho) {
    const card = document.createElement("div");
    const wins = this.winCount.split("-")[0];
    card.id = this.rank;
    card.className = "redips-drag se";
    card.setAttribute("data-w", this.rank.startsWith("Ms") || this.rank.startsWith("Sd") || this.rank.startsWith("Jd") || this.rank.startsWith("Jk") ? wins * 2 : wins);
    card.setAttribute("data-re", this.winCount);
    card.innerHTML = this.getLink(basho);
    return card;
  }
}

export class RetiredRikishi extends Rikishi {
  constructor(rank, name, winCount, id) {
    super(rank, name, winCount, id);
  }

  createCard(basho) {
    const card = super.createCard(basho);
    card.style.backgroundColor = "rgb(203, 203, 203)";
    card.className = "redips-drag intai";
    card.setAttribute("title", "Retired");
    return card;
  }
}

export const allRikishi = theSekitori.map((rikishiString, index) => {
  var [rank, name, winCount] = rikishiString.split(' ');
  const id = sekitoriID[index];
  if (rikishiString.split(' ')[3]) 
    winCount += ' ' + rikishiString.split(' ')[3];
  if (retiredRikishi.includes(name)) {
    return new RetiredRikishi(rank, name, winCount, id);
  }
  return new Rikishi(rank, name, winCount, id);
});
